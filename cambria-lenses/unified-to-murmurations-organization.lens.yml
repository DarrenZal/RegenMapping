# Cambria lens to convert from Unified Organization schema back to Murmurations Organization schema
# This lens transforms the comprehensive unified format back to the simple Murmurations format

schemaName: Organization

lens:
  # Basic field mappings (already in the right format)
  - rename:
      source: "name"
      destination: name
  
  - rename:
      source: "primary_url"
      destination: primary_url
  
  # Map location fields
  - rename:
      source: "locality"
      destination: locality
  
  - rename:
      source: "region"
      destination: region
  
  - rename:
      source: "country_name"
      destination: country_name
  
  # Transform geolocation structure
  - in:
      name: "geolocation"
      lens:
        - rename:
            source: "latitude"
            destination: "lat"
        - rename:
            source: "longitude"
            destination: "lon"
  
  # Keep tags
  - rename:
      source: "tags"
      destination: tags
  
  # Keep relationships
  - rename:
      source: "relationships"
      destination: relationships
  
  # Keep linked_schemas
  - rename:
      source: "linked_schemas"
      destination: linked_schemas
  
  # Organization-specific fields
  - rename:
      source: "mission"
      destination: mission

  - rename:
      source: "tagline"
      destination: tagline

  # Keep other fields that exist in the original profile
  - rename:
      source: "legalType"
      destination: legalType

  - rename:
      source: "foundedYear"
      destination: foundedYear

  - rename:
      source: "employeeRange"
      destination: employeeRange

  - rename:
      source: "sdgFocus"
      destination: sdgFocus

  - rename:
      source: "keyActivities"
      destination: keyActivities

  - rename:
      source: "lastUpdated"
      destination: lastUpdated
  
  # Keep only the fields that exist in the original Murmurations format
  # The transformation will naturally only include the renamed fields
